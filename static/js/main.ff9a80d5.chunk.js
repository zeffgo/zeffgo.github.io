(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,i,r=n(0),o=n.n(r),s=n(9),c=n.n(s),u=(n(17),n(2)),l=n(3),p=n(5),d=n(4),f=n(6),h=n(10),v=n(7),g=n(1),m=(n(18),"x-canvas-piece"),y="fas fa-times-circle fa-2x",b="x-dragging",k=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this)))._isDragging=!1;var a=Object(g.a)(Object(g.a)(n));return a.state={coordinates:{},currentPos:{x:null,y:null}},a.drag=a.drag.bind(a),a.close=a.close.bind(a),a.dragStart=a.dragStart.bind(a),a.dragEnd=a.dragEnd.bind(a),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=e.refs.containerRef,n=e.refs.canvasPiece;t.addEventListener("click",e.close),n.addEventListener("mouseup",e.dragEnd),n.addEventListener("mousedown",e.dragStart),document.addEventListener("mousemove",e.drag),e.makePiece()}},{key:"close",value:function(e){e.stopPropagation();var t=this;if(y===e.target.className){e.stopPropagation();var n=t.props.uid,a={x:t.props.startPos.x-t.getWidth()+5,y:t.props.startPos.y-t.getHeight()+5};t.refs.containerRef.style="transition: 0.15s; left: "+a.x+"px; top: "+a.y+"px",setTimeout(function(){return t.props.onRemove(n)},150)}}},{key:"drag",value:function(e){e.stopPropagation();var t=this;if(1===e.buttons&&t._isDragging){var n=[t.getWidth(),t.getHeight()],a=n[0],i=n[1],r=t.refs.containerRef;t.state.currentPos={x:e.clientX-a/2+"px",y:e.clientY-i/2+"px"},r.style.left=t.state.currentPos.x,r.style.top=t.state.currentPos.y}}},{key:"dragStart",value:function(e){e.stopPropagation();this.refs.containerRef.className=[m,b].join(" "),this._isDragging=!0}},{key:"dragEnd",value:function(e){e.stopPropagation();this.refs.containerRef.className=m,this._isDragging=!1}},{key:"getWidth",value:function(){return this.props.maxX-this.props.minX}},{key:"getHeight",value:function(){return this.props.maxY-this.props.minY}},{key:"getCoordinates",value:function(){return{left:this.state.currentPos.x||5+this.props.startPos.x,top:this.state.currentPos.y||5+this.props.startPos.y}}},{key:"makePiece",value:function(){var e=this,t=[e.props.maxX,e.props.maxY,e.props.minX,e.props.minY,e.props.positions,e.props.imgSrc],n=t[0],a=t[1],i=t[2],r=t[3],o=t[4],s=t[5],c=e.refs.canvasPiece;c.width=n-i,c.height=a-r;var u=c.getContext("2d"),l=new Image;l.src=s,u.beginPath(),o.forEach(function(e){u.lineTo(e.x-i,e.y-r)}),u.closePath(),u.clip(),l.onload=function(){u.drawImage(l,i,r,c.width,c.height,0,0,c.width,c.height)}}},{key:"render",value:function(){var e=this.getCoordinates();return o.a.createElement("figure",{ref:"containerRef",style:Object(v.a)({},e),className:m},o.a.createElement("canvas",{ref:"canvasPiece"}),o.a.createElement("i",{className:y}))}}]),t}(r.Component),w=(n(19),[]),x=0,P=0,j=0,O=0,C=function(e){function t(e){var n;Object(u.a)(this,t),n=Object(p.a)(this,Object(d.a)(t).call(this,e));var a=Object(g.a)(Object(g.a)(n));return a.state={imgSrc:e.src,pieces:[]},a.onPieceRemove=a.onPieceRemove.bind(a),a.setPosition=a.setPosition.bind(a),a.endDrawing=a.endDrawing.bind(a),a.draw=a.draw.bind(a),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"getContext",value:function(){return this.refs.myCanvas.getContext("2d")}},{key:"componentDidMount",value:function(){this.setupImage(),this.setupListeners()}},{key:"onPieceRemove",value:function(e){var t=this.state.pieces.filter(function(t){return t.props.uid!==e});this.setState({pieces:t},this.restartAndReplot)}},{key:"restartAndReplot",value:function(){var e=this;e.setupImage().then(function(){e.state.pieces.forEach(function(t){e.getContext().beginPath(),t.props.positions.forEach(function(t){return e.draw(null,t)}),e.endDrawing(null,!0)})})}},{key:"setupListeners",value:function(){var e=this.refs.myCanvas;e.addEventListener("mousedown",this.setPosition),e.addEventListener("mousemove",this.draw),e.addEventListener("mouseup",this.endDrawing)}},{key:"setupImage",value:function(){var e=this;return new Promise(function(t,n){var a=e.getContext(),i=e.state.imgSrc,r=new Image;r.src=i,r.onload=function(){var n=e.refs.myCanvas;n.setAttribute("width",r.naturalWidth),n.setAttribute("height",r.naturalHeight),a.drawImage(r,0,0),t()}})}},{key:"draw",value:function(e,t){if(i||t){var n=this.getContext();n.lineWidth=1,n.lineCap="round",n.strokeStyle="#000",t||this.setPosition(e);var r=[a.x,a.y],o=r[0],s=r[1];if(t){var c=[t.x,t.y];o=c[0],s=c[1]}n.lineTo(o,s),n.stroke()}}},{key:"setPosition",value:function(e){var t={x:e.offsetX,y:e.offsetY};if(!i){this.cleanupValues();var n=[t.x,t.y];j=n[0],O=n[1],this.getContext().beginPath()}i=!0,t.y>P&&(P=t.y),t.x>x&&(x=t.x),t.y<O&&(O=t.y),t.x<j&&(j=t.x),w.push(t),a=t}},{key:"endDrawing",value:function(e,t){var n=this,a=n.getContext();e&&!t&&w.length<10?n.setState(Object(v.a)({},n.state),n.restartAndReplot):(a.closePath(),a.stroke(),a.fillStyle="#d3d3d3",a.fill(),!t&&i&&n.popClipped(e),i=!1)}},{key:"popClipped",value:function(e){var t="uid"+Date.now(),n=o.a.createElement(k,{positions:w,minX:j,minY:O,maxX:x,maxY:P,startPos:{x:e.clientX,y:e.clientY},imgSrc:this.props.src,key:t,uid:t,onRemove:this.onPieceRemove});this.setState({pieces:[].concat(Object(h.a)(this.state.pieces),[n])})}},{key:"cleanupValues",value:function(){j=null,O=null,x=0,P=0,w=[]}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("section",{id:"canvasWrapper"},o.a.createElement("canvas",{ref:"myCanvas"})),this.state.pieces)}}]),t}(r.Component),E=(n(20),function(e){function t(e){var n;Object(u.a)(this,t),n=Object(p.a)(this,Object(d.a)(t).call(this,e));var a=Object(g.a)(Object(g.a)(n));return a.onClick=a.onClick.bind(a),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"onClick",value:function(e){e.preventDefault();var t=this.props.onClick;t&&t()}},{key:"render",value:function(){var e=this.props.cls+" x-btn";return o.a.createElement("a",{onClick:this.onClick,href:"/#",className:e},this.props.children)}}]),t}(r.Component));function R(){window.location.reload()}n(21);var S=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=function(){for(var e="/images",t=function(){var t=Math.floor(7*Math.random()+1)+".jpg";return[e,t].join("/")},n=t(),a=window.localStorage.getItem("lastImg");!n||a===n;)n=t();return window.localStorage.setItem("lastImg",n),n}();return o.a.createElement("div",{className:"App"},o.a.createElement("h3",{id:"welcome"},"Please draw a path to create a puzzle piece"),o.a.createElement(E,{onClick:R,cls:"fas fa-random"},"\xa0\xa0\xa0","randomize image!"),o.a.createElement(C,{src:e}))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[11,1,2]]]);
//# sourceMappingURL=main.ff9a80d5.chunk.js.map